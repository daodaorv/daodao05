# 叨叨房车小程序 - 基础组件使用指南

## 概述

本项目基于 **uView Plus 3.6.18** 组件库，提供 136 个开箱即用的组件。为了保持代码一致性和开发效率，我们采用以下策略：

1. **优先使用 uView Plus 组件** - 直接使用，无需自定义
2. **薄封装组件** - 仅在必要时创建薄封装层
3. **避免重复造轮子** - 最大化利用现有组件

---

## 一、uView Plus 常用组件

### 1.1 基础组件

#### u-button (按钮)

**使用场景**: 所有按钮操作

```vue
<!-- 主按钮 -->
<u-button
  text="立即预订"
  type="primary"
  :custom-style="{
    background: 'linear-gradient(135deg, #FF9F29 0%, #FFB84D 100%)',
    borderRadius: '50rpx',
    height: '96rpx',
    fontSize: '34rpx',
    fontWeight: 'bold'
  }"
  @click="handleSubmit"
></u-button>

<!-- 次要按钮 -->
<u-button
  text="取消"
  type="default"
  :custom-style="{
    background: '#F2F3F5',
    color: '#4E5969',
    borderRadius: '50rpx'
  }"
></u-button>

<!-- 文字按钮 -->
<u-button
  text="查看详情"
  type="primary"
  :plain="true"
  :hairline="true"
></u-button>
```

#### u-icon (图标)

**使用场景**: 所有图标显示

```vue
<u-icon name="bell" size="24" color="#333"></u-icon>
<u-icon name="arrow-right" size="14" color="#999"></u-icon>
<u-icon name="heart-fill" size="20" color="#FF9F29"></u-icon>
```

**常用图标**:
- `bell` - 通知
- `arrow-right` - 右箭头
- `heart` / `heart-fill` - 收藏
- `home` / `home-fill` - 首页
- `car` / `car-fill` - 车辆
- `gift` / `gift-fill` - 礼物
- `map` / `map-fill` - 地图
- `account` - 用户
- `checkmark-circle` / `checkmark-circle-fill` - 勾选

#### u-tag (标签)

**使用场景**: 状态标签、分类标签

```vue
<!-- 实心标签 -->
<u-tag text="热门" type="error" size="mini"></u-tag>
<u-tag text="新车" type="success" size="mini"></u-tag>

<!-- 空心标签 -->
<u-tag text="托管优选" type="primary" :plain="true" size="mini"></u-tag>

<!-- 自定义样式 -->
<u-tag
  text="限时特惠"
  :custom-style="{
    background: '#FFF5E9',
    color: '#FF9F29',
    borderRadius: '8rpx',
    padding: '8rpx 16rpx'
  }"
></u-tag>
```

---

### 1.2 表单组件

#### u-input (输入框)

**使用场景**: 所有文本输入

```vue
<u-input
  v-model="value"
  placeholder="请输入内容"
  :clearable="true"
  :border="true"
  :custom-style="{
    height: '88rpx',
    borderRadius: '16rpx',
    padding: '0 24rpx'
  }"
></u-input>
```

#### u-form (表单)

**使用场景**: 表单验证和管理

```vue
<u-form ref="formRef" :model="formData" :rules="rules">
  <u-form-item label="姓名" prop="name" required>
    <u-input v-model="formData.name" placeholder="请输入姓名"></u-input>
  </u-form-item>

  <u-form-item label="手机号" prop="phone" required>
    <u-input v-model="formData.phone" placeholder="请输入手机号"></u-input>
  </u-form-item>
</u-form>

<script setup>
const formRef = ref();
const formData = ref({
  name: '',
  phone: ''
});

const rules = {
  name: [{ required: true, message: '请输入姓名', trigger: 'blur' }],
  phone: [
    { required: true, message: '请输入手机号', trigger: 'blur' },
    { pattern: /^1[3-9]\d{9}$/, message: '手机号格式不正确', trigger: 'blur' }
  ]
};

const handleSubmit = () => {
  formRef.value.validate().then(() => {
    // 验证通过
  }).catch(() => {
    // 验证失败
  });
};
</script>
```

---

### 1.3 展示组件

#### u-swiper (轮播)

**使用场景**: 图片轮播、广告轮播

```vue
<u-swiper
  :list="banners"
  keyName="image"
  :autoplay="true"
  :circular="true"
  height="480"
  :radius="0"
  indicator
  indicatorMode="dot"
  indicatorActiveColor="#FF9F29"
></u-swiper>
```

#### u-skeleton (骨架屏)

**使用场景**: 页面加载状态

```vue
<u-skeleton
  v-if="loading"
  :loading="true"
  :rows="5"
  :title="true"
  :avatar="true"
  :animate="true"
></u-skeleton>

<view v-else>
  <!-- 实际内容 -->
</view>
```

---

### 1.4 反馈组件

#### u-loading-icon (加载图标)

**使用场景**: 按钮加载、局部加载

```vue
<u-loading-icon mode="circle" color="#FF9F29" size="40"></u-loading-icon>
```

#### u-modal (模态框)

**使用场景**: 确认对话框、提示框

```vue
<u-modal
  :show="showModal"
  title="提示"
  content="确定要删除吗？"
  :show-cancel-button="true"
  @confirm="handleConfirm"
  @cancel="showModal = false"
></u-modal>
```

---

### 1.5 布局组件

#### u-cell / u-cell-group (单元格)

**使用场景**: 列表项、设置项

```vue
<u-cell-group>
  <u-cell title="个人信息" :is-link="true" @click="navigateTo('/pages/profile/edit')">
    <template #icon>
      <u-icon name="account" size="20" color="#FF9F29"></u-icon>
    </template>
  </u-cell>

  <u-cell title="我的收藏" :is-link="true" @click="navigateTo('/pages/profile/favorites')">
    <template #icon>
      <u-icon name="heart" size="20" color="#FF9F29"></u-icon>
    </template>
  </u-cell>
</u-cell-group>
```

#### u-grid (宫格)

**使用场景**: 功能入口、菜单

```vue
<u-grid :col="4" :border="false">
  <u-grid-item v-for="item in menuList" :key="item.id">
    <u-icon :name="item.icon" size="32" color="#FF9F29"></u-icon>
    <text class="grid-text">{{ item.name }}</text>
  </u-grid-item>
</u-grid>
```

---

## 二、自定义薄封装组件

### 2.1 EmptyState (空状态)

**文件位置**: `components/base/EmptyState.vue`

**使用场景**: 列表为空、搜索无结果

```vue
<EmptyState
  v-if="list.length === 0"
  mode="data"
  text="暂无数据"
  buttonText="去看看"
  @button-click="handleGoExplore"
/>
```

**Props**:
- `mode` - 空状态类型 (data/car/order/search 等)
- `customIcon` - 自定义图标
- `text` - 提示文字
- `textColor` - 文字颜色
- `textSize` - 文字大小
- `iconSize` - 图标大小
- `iconColor` - 图标颜色
- `buttonText` - 按钮文字（可选）

**Events**:
- `button-click` - 按钮点击事件

**示例**:

```vue
<!-- 基础用法 -->
<EmptyState text="暂无订单" />

<!-- 带按钮 -->
<EmptyState
  mode="car"
  text="暂无车辆"
  buttonText="去选车"
  @button-click="navigateTo('/pages/vehicle/list')"
/>

<!-- 自定义样式 -->
<EmptyState
  customIcon="search"
  text="未找到相关内容"
  textColor="#999999"
  iconSize="180"
/>
```

---

### 2.2 ErrorState (错误状态)

**文件位置**: `components/base/ErrorState.vue`

**使用场景**: 加载失败、网络错误

```vue
<ErrorState
  v-if="error"
  :message="errorMessage"
  @retry="loadData"
/>
```

**Props**:
- `customIcon` - 自定义图标
- `message` - 错误信息
- `retryText` - 重试按钮文字
- `textSize` - 文字大小
- `iconSize` - 图标大小

**Events**:
- `retry` - 重试事件

**示例**:

```vue
<!-- 基础用法 -->
<ErrorState @retry="loadData" />

<!-- 自定义错误信息 -->
<ErrorState
  message="网络连接失败"
  retryText="重新加载"
  @retry="handleRetry"
/>

<!-- 自定义图标 -->
<ErrorState
  customIcon="wifi-off"
  message="网络不可用"
  @retry="checkNetwork"
/>
```

---

## 三、页面状态管理最佳实践

### 3.1 完整的页面状态

```vue
<template>
  <view class="page">
    <!-- 骨架屏 - 初次加载 -->
    <u-skeleton
      v-if="loading && !list.length"
      :loading="true"
      :rows="5"
      :title="true"
    ></u-skeleton>

    <!-- 错误状态 -->
    <ErrorState
      v-else-if="error"
      :message="errorMessage"
      @retry="loadData"
    />

    <!-- 空状态 -->
    <EmptyState
      v-else-if="!loading && list.length === 0"
      text="暂无数据"
      buttonText="去看看"
      @button-click="handleGoExplore"
    />

    <!-- 正常内容 -->
    <view v-else>
      <view v-for="item in list" :key="item.id" class="item">
        {{ item.name }}
      </view>

      <!-- 加载更多 -->
      <u-loadmore
        v-if="list.length > 0"
        :status="loadmoreStatus"
        :loading-text="'加载中...'"
        :loadmore-text="'加载更多'"
        :nomore-text="'没有更多了'"
      ></u-loadmore>
    </view>
  </view>
</template>

<script setup lang="ts">
import { ref, onMounted } from 'vue';
import EmptyState from '@/components/base/EmptyState.vue';
import ErrorState from '@/components/base/ErrorState.vue';

const loading = ref(false);
const error = ref(false);
const errorMessage = ref('');
const list = ref([]);
const loadmoreStatus = ref('loadmore');

const loadData = async () => {
  loading.value = true;
  error.value = false;

  try {
    // 模拟 API 调用
    const res = await api.getList();
    list.value = res.data;
  } catch (e) {
    error.value = true;
    errorMessage.value = e.message || '加载失败';
  } finally {
    loading.value = false;
  }
};

onMounted(() => {
  loadData();
});
</script>
```

---

## 四、样式规范

### 4.1 使用全局样式变量

```scss
// 使用 uni.scss 中定义的变量
.card {
  background: $uni-bg-color-card;
  border-radius: $uni-radius-lg;
  box-shadow: $uni-shadow-card;
  padding: $uni-spacing-lg;
  margin-bottom: $uni-spacing-md;
}

.button {
  background: $uni-color-primary-gradient;
  border-radius: $uni-radius-btn;
  height: 96rpx;
}
```

### 4.2 卡片样式

```scss
.card {
  background: #FFFFFF;
  border-radius: 24rpx;
  box-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.04);
  padding: 32rpx;
  margin-bottom: 24rpx;
  transition: transform 0.2s;

  &:active {
    transform: scale(0.98);
  }
}
```

---

## 五、常见问题

### Q1: 如何自定义 uView Plus 组件样式？

使用 `custom-style` 属性：

```vue
<u-button
  text="按钮"
  :custom-style="{
    background: '#FF9F29',
    borderRadius: '50rpx',
    height: '96rpx'
  }"
></u-button>
```

### Q2: 如何全局配置 uView Plus？

在 `App.vue` 中配置：

```vue
<script setup>
import { onLaunch } from '@dcloudio/uni-app';

onLaunch(() => {
  // 全局配置
  uni.$u.config.unit = 'rpx';
});
</script>
```

### Q3: EmptyState 和 ErrorState 的区别？

- **EmptyState**: 数据为空的正常状态（如列表为空）
- **ErrorState**: 加载失败的错误状态（如网络错误）

---

## 六、参考资源

- **uView Plus 官方文档**: https://uview-plus.jiangruyi.com
- **uView Plus 备用文档**: https://uiadmin.net/uview-plus
- **项目设计规范**: `docs/UI_DESIGN_GUIDE.md`
- **全局样式变量**: `uni.scss`

---

**版本**: 1.0.0
**更新日期**: 2025-12-07
**维护者**: Claude Code (AI Assistant)
