# 小程序联调问题修复记录

**修复时间**: 2025-12-25 15:32
**问题**: 退出登录功能报错

---

## 问题描述

**错误信息**:
```
TypeError: e is not a function
```

**错误位置**: `miniprogram/utils/auth.ts:183`

---

## 问题原因

动态导入模块后,解构赋值在编译时出现问题:
```typescript
const { logout: logoutApi } = await import('@/api/auth')
await logoutApi()  // 编译后变成 e is not a function
```

---

## 解决方案

修改为直接访问模块属性,并添加类型检查:
```typescript
const authApi = await import('@/api/auth')
if (authApi && typeof authApi.logout === 'function') {
  await authApi.logout()
}
```

---

## 测试建议

1. 重新编译小程序
2. 测试退出登录功能
3. 验证登录信息清除
4. 验证页面跳转

---

**状态**: ✅ 已修复
