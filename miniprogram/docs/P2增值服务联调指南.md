# P2å¢å€¼æœåŠ¡æ¨¡å—å‰åç«¯è”è°ƒæŒ‡å—

**åˆ›å»ºæ—¶é—´**: 2025-12-25 19:30
**åç«¯çŠ¶æ€**: âœ… å·²å®Œæˆå¼€å‘å¹¶æµ‹è¯•é€šè¿‡
**å‰ç«¯çŠ¶æ€**: â³ å‡†å¤‡å¼€å§‹è”è°ƒ

---

## ğŸ“‹ è”è°ƒå‡†å¤‡æ¸…å•

### åç«¯å‡†å¤‡ âœ…

- âœ… æ•°æ®åº“è¡¨å·²åˆ›å»º (special_offers, campsites, tours)
- âœ… æµ‹è¯•æ•°æ®å·²æ’å…¥ (UTF-8ç¼–ç )
- âœ… 21ä¸ªAPIç«¯ç‚¹å·²å®ç°
- âœ… ä¸­æ–‡æ˜¾ç¤ºæ­£å¸¸
- âœ… åç«¯æœåŠ¡è¿è¡Œæ­£å¸¸ (ç«¯å£ 3001)

### å‰ç«¯å‡†å¤‡ â³

- â³ é…ç½®APIåŸºç¡€URL
- â³ åˆ›å»ºAPIè¯·æ±‚æ–¹æ³•
- â³ å®ç°é¡µé¢UI
- â³ å¯¹æ¥åç«¯æ¥å£

---

## ğŸ”— APIç«¯ç‚¹æ¸…å•

### 1. ç‰¹æƒ ç§Ÿè½¦æ¨¡å— (5ä¸ªAPI)

#### 1.1 è·å–ç‰¹æƒ å¥—é¤åˆ—è¡¨
```
GET /api/v1/special-offers
```

**æŸ¥è¯¢å‚æ•°**:
- `route` (å¯é€‰): è·¯çº¿ç­›é€‰ (å‡ºå‘åœ°æˆ–ç›®çš„åœ°)
- `priceRange` (å¯é€‰): ä»·æ ¼åŒºé—´ (å¦‚ "1000-2000")
- `sortBy` (å¯é€‰): æ’åºæ–¹å¼ ("price-asc", "price-desc", "quota")
- `page` (å¯é€‰): é¡µç ï¼Œé»˜è®¤1
- `limit` (å¯é€‰): æ¯é¡µæ•°é‡ï¼Œé»˜è®¤20

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 0,
  "message": "success",
  "data": {
    "list": [
      {
        "id": 4,
        "route_from": "åŒ—äº¬",
        "route_to": "æˆéƒ½",
        "vehicle_name": "ä¾ç»´æŸ¯Cå‹æˆ¿è½¦",
        "package_price": "1280.00",
        "original_price": "1680.00",
        "rental_days": 3,
        "remaining_quota": 8
      }
    ],
    "total": 2,
    "page": 1,
    "pageSize": 20,
    "hasMore": false
  }
}
```

#### 1.2 è·å–ç‰¹æƒ å¥—é¤è¯¦æƒ…
```
GET /api/v1/special-offers/:id
```

**è·¯å¾„å‚æ•°**:
- `id`: å¥—é¤ID

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 0,
  "message": "success",
  "data": {
    "id": 4,
    "route_from": "åŒ—äº¬",
    "route_to": "æˆéƒ½",
    "vehicle_name": "ä¾ç»´æŸ¯Cå‹æˆ¿è½¦",
    "vehicle_image": "https://example.com/images/iveco-c.jpg",
    "vehicle_features": ["4-6äºº", "è‡ªåŠ¨æŒ¡", "æŸ´æ²¹", "å«ç”Ÿé—´"],
    "package_price": "1280.00",
    "original_price": "1680.00",
    "rental_days": 3,
    "package_includes": ["è½¦è¾†ç§Ÿé‡‘", "åŸºç¡€ä¿é™©", "å¼‚åœ°è¿˜è½¦è´¹"],
    "booking_notices": ["éœ€æå‰3å¤©é¢„è®¢", "éœ€æ”¯ä»˜æŠ¼é‡‘5000å…ƒ"],
    "cancellation_policy": ["å‡ºå‘å‰7å¤©å–æ¶ˆå…¨é¢é€€æ¬¾"]
  }
}
```

#### 1.3 è®¡ç®—å¥—é¤ä»·æ ¼
```
POST /api/v1/special-offers/calculate-price
```

**è¯·æ±‚ä½“**:
```json
{
  "offerId": 4,
  "pickupDate": "2025-12-30",
  "insuranceType": "standard",
  "selectedServices": ["GPS", "å„¿ç«¥åº§æ¤…"],
  "couponCode": "DISCOUNT100"
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 0,
  "message": "success",
  "data": {
    "packageFee": 1280,
    "insuranceFee": 80,
    "serviceFee": 100,
    "discount": 100,
    "totalAmount": 1360
  }
}
```
