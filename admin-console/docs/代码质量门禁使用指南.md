# ä»£ç è´¨é‡é—¨ç¦ä½¿ç”¨æŒ‡å—

**ç‰ˆæœ¬**: v1.0
**æ›´æ–°æ—¶é—´**: 2025-12-14
**é€‚ç”¨é¡¹ç›®**: å¨å¨æˆ¿è½¦ PC ç®¡ç†ç«¯

---

## ğŸ“‹ ç›®å½•

1. [æ¦‚è¿°](#æ¦‚è¿°)
2. [è´¨é‡æ ‡å‡†](#è´¨é‡æ ‡å‡†)
3. [æœ¬åœ°å¼€å‘](#æœ¬åœ°å¼€å‘)
4. [Git Hooks](#git-hooks)
5. [CI/CD é›†æˆ](#cicd-é›†æˆ)
6. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
7. [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)

---

## æ¦‚è¿°

ä»£ç è´¨é‡é—¨ç¦æ˜¯ä¸€å¥—è‡ªåŠ¨åŒ–çš„ä»£ç è´¨é‡æ£€æŸ¥ç³»ç»Ÿï¼Œç¡®ä¿æ‰€æœ‰æäº¤çš„ä»£ç éƒ½ç¬¦åˆé¡¹ç›®çš„è´¨é‡æ ‡å‡†ã€‚

### æ ¸å¿ƒç›®æ ‡

- âœ… **é›¶è­¦å‘Š**: ESLint 0 errors, 0 warnings
- âœ… **ç±»å‹å®‰å…¨**: TypeScript ç±»å‹æ£€æŸ¥ 100% é€šè¿‡
- âœ… **æ„å»ºæˆåŠŸ**: ä»£ç å¯ä»¥æˆåŠŸæ„å»º
- âœ… **è‡ªåŠ¨åŒ–**: æœ¬åœ°æäº¤å’Œ CI/CD è‡ªåŠ¨æ£€æŸ¥

### æ£€æŸ¥æ—¶æœº

1. **æœ¬åœ°æäº¤å‰** (Pre-commit Hook)
   - æ¯æ¬¡ `git commit` å‰è‡ªåŠ¨è¿è¡Œ
   - æ£€æŸ¥å¤±è´¥ä¼šé˜»æ­¢æäº¤

2. **æ¨é€åˆ°è¿œç¨‹** (CI/CD)
   - æ¯æ¬¡ `git push` åè‡ªåŠ¨è¿è¡Œ
   - æ£€æŸ¥å¤±è´¥ä¼šé˜»æ­¢åˆå¹¶

3. **Pull Request** (CI/CD)
   - åˆ›å»º PR æ—¶è‡ªåŠ¨è¿è¡Œ
   - åœ¨ PR é¡µé¢æ˜¾ç¤ºæ£€æŸ¥ç»“æœ

---

## è´¨é‡æ ‡å‡†

### å¿…é¡»æ»¡è¶³çš„æ¡ä»¶

| æ£€æŸ¥é¡¹ | æ ‡å‡† | è¯´æ˜ |
|--------|------|------|
| **ESLint é”™è¯¯** | 0 ä¸ª | ä¸å…è®¸ä»»ä½•è¯­æ³•é”™è¯¯ |
| **ESLint è­¦å‘Š** | 0 ä¸ª | ä¸å…è®¸ä»»ä½•ä»£ç è§„èŒƒè­¦å‘Š |
| **TypeScript** | é€šè¿‡ | æ‰€æœ‰ç±»å‹æ£€æŸ¥å¿…é¡»é€šè¿‡ |
| **æ„å»º** | æˆåŠŸ | ä»£ç å¿…é¡»èƒ½å¤ŸæˆåŠŸæ„å»º |

### ESLint è§„åˆ™é…ç½®

å½“å‰é…ç½® (`.eslintrc.cjs`):

```javascript
rules: {
  'no-console': process.env.NODE_ENV === 'production' ? 'warn' : 'off',
  'no-debugger': process.env.NODE_ENV === 'production' ? 'warn' : 'off',
  'vue/multi-word-component-names': 'off',
  '@typescript-eslint/no-explicit-any': 'off',
  '@typescript-eslint/no-unused-vars': ['warn', {
    argsIgnorePattern: '^_',
    varsIgnorePattern: '^_',
    ignoreRestSiblings: true
  }],
  'vue/no-mutating-props': 'warn',
}
```

---

## æœ¬åœ°å¼€å‘

### å®‰è£…ä¾èµ–

é¦–æ¬¡å…‹éš†é¡¹ç›®åï¼Œå®‰è£…ä¾èµ–ï¼š

```bash
cd admin-console
npm install
```

è¿™ä¼šè‡ªåŠ¨å®‰è£… husky å¹¶é…ç½® Git Hooksã€‚

### æ‰‹åŠ¨è¿è¡Œè´¨é‡æ£€æŸ¥

#### 1. å®Œæ•´è´¨é‡æ£€æŸ¥

```bash
npm run quality:check
```

è¿™ä¼šè¿è¡Œï¼š
- âœ… ESLint ä»£ç è§„èŒƒæ£€æŸ¥
- âœ… TypeScript ç±»å‹æ£€æŸ¥
- âœ… è¾“å‡ºè¯¦ç»†çš„æ£€æŸ¥ç»“æœ

#### 2. å•ç‹¬è¿è¡Œå„é¡¹æ£€æŸ¥

```bash
# ESLint æ£€æŸ¥ï¼ˆè‡ªåŠ¨ä¿®å¤ï¼‰
npm run lint

# ESLint æ£€æŸ¥ï¼ˆä»…æ£€æŸ¥ï¼Œä¸ä¿®å¤ï¼‰
npm run lint:check

# TypeScript ç±»å‹æ£€æŸ¥
npm run type-check

# ä»£ç æ ¼å¼åŒ–
npm run format

# ä»£ç æ ¼å¼æ£€æŸ¥
npm run format:check

# æ„å»ºæµ‹è¯•
npm run build
```

#### 3. ç”Ÿæˆè´¨é‡æŠ¥å‘Š

```bash
npm run quality:report
```

æŠ¥å‘Šä¼šä¿å­˜åˆ° `docs/quality-reports/report-YYYY-MM-DD.md`

---

## Git Hooks

### Pre-commit Hook

æ¯æ¬¡æäº¤å‰è‡ªåŠ¨è¿è¡Œè´¨é‡æ£€æŸ¥ã€‚

#### å·¥ä½œæµç¨‹

```
git add .
git commit -m "feat: æ–°åŠŸèƒ½"
    â†“
ğŸ” è‡ªåŠ¨è¿è¡Œè´¨é‡æ£€æŸ¥
    â†“
âœ… æ£€æŸ¥é€šè¿‡ â†’ æäº¤æˆåŠŸ
âŒ æ£€æŸ¥å¤±è´¥ â†’ æäº¤è¢«é˜»æ­¢
```

#### ç¤ºä¾‹è¾“å‡º

**æˆåŠŸçš„æäº¤**:
```bash
$ git commit -m "feat: æ·»åŠ ç”¨æˆ·ç®¡ç†åŠŸèƒ½"

ğŸ” Running pre-commit quality checks...

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   ä»£ç è´¨é‡é—¨ç¦æ£€æŸ¥ - Quality Gate   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ” ESLint ä»£ç è§„èŒƒæ£€æŸ¥...
âœ… ESLint ä»£ç è§„èŒƒæ£€æŸ¥ é€šè¿‡
âœ¨ ESLint: 0 errors, 0 warnings

ğŸ” TypeScript ç±»å‹æ£€æŸ¥...
âœ… TypeScript ç±»å‹æ£€æŸ¥ é€šè¿‡

==================================================

âœ… æ‰€æœ‰ä»£ç è´¨é‡æ£€æŸ¥é€šè¿‡ï¼
ğŸ‰ ä»£ç ç¬¦åˆè´¨é‡æ ‡å‡†ï¼Œå¯ä»¥æäº¤ã€‚

âœ… Pre-commit checks passed!
[main 1a2b3c4] feat: æ·»åŠ ç”¨æˆ·ç®¡ç†åŠŸèƒ½
 3 files changed, 150 insertions(+)
```

**å¤±è´¥çš„æäº¤**:
```bash
$ git commit -m "feat: æ·»åŠ ç”¨æˆ·ç®¡ç†åŠŸèƒ½"

ğŸ” Running pre-commit quality checks...

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   ä»£ç è´¨é‡é—¨ç¦æ£€æŸ¥ - Quality Gate   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ” ESLint ä»£ç è§„èŒƒæ£€æŸ¥...
âŒ ESLint ä»£ç è§„èŒƒæ£€æŸ¥ å¤±è´¥

âš ï¸  å‘ç° 0 ä¸ªé”™è¯¯å’Œ 5 ä¸ªè­¦å‘Š
âŒ ä»£ç è´¨é‡é—¨ç¦è¦æ±‚: 0 errors, 0 warnings

==================================================

âŒ ä»£ç è´¨é‡é—¨ç¦æ£€æŸ¥å¤±è´¥ï¼

è¯·ä¿®å¤ä»¥ä¸Šé—®é¢˜åå†æäº¤ä»£ç ã€‚
æç¤º: è¿è¡Œ npm run lint å’Œ npm run type-check æŸ¥çœ‹è¯¦ç»†é”™è¯¯

âŒ Pre-commit checks failed. Commit aborted.
```

### è·³è¿‡ Hookï¼ˆä¸æ¨èï¼‰

**ä»…åœ¨ç´§æ€¥æƒ…å†µä¸‹ä½¿ç”¨**:

```bash
git commit -m "feat: ç´§æ€¥ä¿®å¤" --no-verify
```

âš ï¸ **è­¦å‘Š**: è·³è¿‡æ£€æŸ¥å¯èƒ½å¯¼è‡´ä»£ç è´¨é‡é—®é¢˜ï¼Œåº”è¯¥å°½é‡é¿å…ã€‚

---

## CI/CD é›†æˆ

### GitHub Actions é…ç½®

é¡¹ç›®å·²é…ç½® GitHub Actions è‡ªåŠ¨åŒ–æ£€æŸ¥ã€‚

#### é…ç½®æ–‡ä»¶

`.github/workflows/code-quality.yml`

#### è§¦å‘æ¡ä»¶

- âœ… Push åˆ° `main`, `develop`, `feature/**`, `bugfix/**`, `refactor/**` åˆ†æ”¯
- âœ… åˆ›å»º Pull Request åˆ° `main` æˆ– `develop` åˆ†æ”¯

#### æ£€æŸ¥æµç¨‹

```
1. Checkout ä»£ç 
2. å®‰è£… Node.js 18.x
3. å®‰è£…ä¾èµ– (npm ci)
4. è¿è¡Œ ESLint æ£€æŸ¥
5. æ£€æŸ¥ ESLint è­¦å‘Šæ•°é‡
6. è¿è¡Œ TypeScript ç±»å‹æ£€æŸ¥
7. è¿è¡Œæ„å»ºæµ‹è¯•
8. ç”Ÿæˆè´¨é‡æŠ¥å‘Š
9. åœ¨ PR ä¸­æ·»åŠ è¯„è®º
```

#### PR è¯„è®ºç¤ºä¾‹

GitHub Actions ä¼šåœ¨ PR ä¸­è‡ªåŠ¨æ·»åŠ è´¨é‡æŠ¥å‘Šè¯„è®ºï¼š

```markdown
## ğŸ¯ Code Quality Gate Report

âœ… **All quality checks passed!**

| Check | Status |
|-------|--------|
| ESLint | âœ… 0 errors, 0 warnings |
| TypeScript | âœ… Type check passed |
| Build | âœ… Build successful |

---
*Generated by Code Quality Gate*
```

### æŸ¥çœ‹ CI/CD ç»“æœ

1. åœ¨ GitHub ä»“åº“é¡µé¢ï¼Œç‚¹å‡» **Actions** æ ‡ç­¾
2. é€‰æ‹©æœ€è¿‘çš„ workflow è¿è¡Œ
3. æŸ¥çœ‹è¯¦ç»†çš„æ£€æŸ¥æ—¥å¿—

---

## å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•ä¿®å¤ ESLint è­¦å‘Šï¼Ÿ

**A**: è¿è¡Œè‡ªåŠ¨ä¿®å¤å‘½ä»¤ï¼š

```bash
npm run lint
```

å¤§éƒ¨åˆ†è­¦å‘Šå¯ä»¥è‡ªåŠ¨ä¿®å¤ã€‚æ— æ³•è‡ªåŠ¨ä¿®å¤çš„è­¦å‘Šéœ€è¦æ‰‹åŠ¨ä¿®æ”¹ä»£ç ã€‚

### Q2: å¦‚ä½•å¤„ç†æœªä½¿ç”¨çš„å˜é‡ï¼Ÿ

**A**: æœ‰ä¸¤ç§æ–¹å¼ï¼š

1. **åˆ é™¤æœªä½¿ç”¨çš„å˜é‡**ï¼ˆæ¨èï¼‰
2. **é‡å‘½åä¸º `_` å¼€å¤´**ï¼ˆå¦‚æœå˜é‡å°†æ¥ä¼šä½¿ç”¨ï¼‰

```typescript
// âŒ é”™è¯¯
const unusedVar = 123

// âœ… æ–¹æ¡ˆ1: åˆ é™¤
// åˆ é™¤è¿™è¡Œä»£ç 

// âœ… æ–¹æ¡ˆ2: é‡å‘½å
const _unusedVar = 123
```

### Q3: å¦‚ä½•å¤„ç† Props çªå˜è­¦å‘Šï¼Ÿ

**A**: ä½¿ç”¨ `emit` äº‹ä»¶è€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹ propsï¼š

```vue
<!-- âŒ é”™è¯¯ -->
<script setup>
const props = defineProps(['value'])
props.value = 'new value' // ç›´æ¥ä¿®æ”¹ props
</script>

<!-- âœ… æ­£ç¡® -->
<script setup>
const props = defineProps(['value'])
const emit = defineEmits(['update:value'])

function updateValue(newValue) {
  emit('update:value', newValue) // é€šè¿‡äº‹ä»¶é€šçŸ¥çˆ¶ç»„ä»¶
}
</script>
```

### Q4: TypeScript ç±»å‹é”™è¯¯å¦‚ä½•ä¿®å¤ï¼Ÿ

**A**: è¿è¡Œç±»å‹æ£€æŸ¥æŸ¥çœ‹è¯¦ç»†é”™è¯¯ï¼š

```bash
npm run type-check
```

å¸¸è§é—®é¢˜ï¼š
- ç¼ºå°‘ç±»å‹å®šä¹‰
- ç±»å‹ä¸åŒ¹é…
- ä½¿ç”¨äº† `any` ç±»å‹

### Q5: æ„å»ºå¤±è´¥å¦‚ä½•å¤„ç†ï¼Ÿ

**A**: è¿è¡Œæ„å»ºå‘½ä»¤æŸ¥çœ‹è¯¦ç»†é”™è¯¯ï¼š

```bash
npm run build
```

å¸¸è§åŸå› ï¼š
- å¯¼å…¥è·¯å¾„é”™è¯¯
- ç¼ºå°‘ä¾èµ–
- TypeScript ç±»å‹é”™è¯¯

### Q6: å¦‚ä½•ä¸´æ—¶ç¦ç”¨æŸä¸ª ESLint è§„åˆ™ï¼Ÿ

**A**: ä½¿ç”¨ ESLint æ³¨é‡Šï¼ˆè°¨æ…ä½¿ç”¨ï¼‰ï¼š

```typescript
// å•è¡Œç¦ç”¨
// eslint-disable-next-line rule-name
const foo = bar

// æ–‡ä»¶çº§ç¦ç”¨
/* eslint-disable rule-name */
// ä»£ç ...
/* eslint-enable rule-name */

// æ•´ä¸ªæ–‡ä»¶ç¦ç”¨ï¼ˆä¸æ¨èï¼‰
/* eslint-disable */
```

---

## æ•…éšœæ’é™¤

### é—®é¢˜ 1: Husky Hook æœªç”Ÿæ•ˆ

**ç—‡çŠ¶**: æäº¤ä»£ç æ—¶æ²¡æœ‰è¿è¡Œè´¨é‡æ£€æŸ¥

**è§£å†³æ–¹æ¡ˆ**:

```bash
# é‡æ–°å®‰è£… husky
npm install husky --save-dev

# æ‰‹åŠ¨åˆå§‹åŒ– husky
npx husky install

# ç¡®ä¿ pre-commit hook æœ‰æ‰§è¡Œæƒé™
chmod +x .husky/pre-commit
```

### é—®é¢˜ 2: è´¨é‡æ£€æŸ¥è„šæœ¬æŠ¥é”™

**ç—‡çŠ¶**: è¿è¡Œ `npm run quality:check` æŠ¥é”™

**è§£å†³æ–¹æ¡ˆ**:

```bash
# ç¡®ä¿ scripts ç›®å½•å­˜åœ¨
mkdir -p scripts

# ç¡®ä¿è„šæœ¬æ–‡ä»¶å­˜åœ¨
ls scripts/quality-check.js

# é‡æ–°å®‰è£…ä¾èµ–
rm -rf node_modules package-lock.json
npm install
```

### é—®é¢˜ 3: CI/CD æ£€æŸ¥å¤±è´¥ä½†æœ¬åœ°é€šè¿‡

**ç—‡çŠ¶**: æœ¬åœ°æ£€æŸ¥é€šè¿‡ï¼Œä½† GitHub Actions å¤±è´¥

**å¯èƒ½åŸå› **:
1. æœ¬åœ°å’Œ CI ç¯å¢ƒçš„ Node.js ç‰ˆæœ¬ä¸åŒ
2. ä¾èµ–ç‰ˆæœ¬ä¸ä¸€è‡´
3. ç¯å¢ƒå˜é‡ä¸åŒ

**è§£å†³æ–¹æ¡ˆ**:

```bash
# ä½¿ç”¨ CI ç›¸åŒçš„ Node.js ç‰ˆæœ¬
nvm use 18

# æ¸…ç†å¹¶é‡æ–°å®‰è£…ä¾èµ–
rm -rf node_modules package-lock.json
npm install

# è¿è¡Œå®Œæ•´æ£€æŸ¥
npm run quality:check
```

### é—®é¢˜ 4: å¤§é‡è­¦å‘Šéœ€è¦ä¿®å¤

**ç—‡çŠ¶**: æœ‰å¾ˆå¤š ESLint è­¦å‘Šéœ€è¦ä¿®å¤

**è§£å†³æ–¹æ¡ˆ**:

```bash
# 1. å…ˆè¿è¡Œè‡ªåŠ¨ä¿®å¤
npm run lint

# 2. æŸ¥çœ‹å‰©ä½™è­¦å‘Š
npm run lint:check

# 3. é€ä¸ªæ–‡ä»¶ä¿®å¤
# ä¼˜å…ˆä¿®å¤é”™è¯¯ï¼Œå†ä¿®å¤è­¦å‘Š
# å¯ä»¥åˆ†æ‰¹æäº¤ï¼Œé€æ­¥æ”¹è¿›
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [ä»£ç ä¼˜åŒ–æ€»ç»“æŠ¥å‘Š Phase 5](./ä»£ç ä¼˜åŒ–æ€»ç»“æŠ¥å‘Š-Phase5.md)
- [TypeScript ç±»å‹é”™è¯¯æ–‡ä»¶æ¸…å•](./TypeScriptç±»å‹é”™è¯¯æ–‡ä»¶æ¸…å•.md)
- [ESLint é…ç½®æ–‡æ¡£](../.eslintrc.cjs)
- [GitHub Actions é…ç½®](../.github/workflows/code-quality.yml)

---

## ğŸ”„ æ›´æ–°æ—¥å¿—

### v1.0 (2025-12-14)

- âœ… åˆå§‹ç‰ˆæœ¬
- âœ… æ·»åŠ  Pre-commit Hook
- âœ… é›†æˆ GitHub Actions
- âœ… åˆ›å»ºè´¨é‡æ£€æŸ¥è„šæœ¬
- âœ… åˆ›å»ºè´¨é‡æŠ¥å‘Šè„šæœ¬
- âœ… å®Œæ•´çš„ä½¿ç”¨æ–‡æ¡£

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»ï¼š

- **å‰ç«¯å›¢é˜Ÿ**: å¨å¨æˆ¿è½¦å‰ç«¯å¼€å‘ç»„
- **æŠ€æœ¯è´Ÿè´£äºº**: å‰ç«¯æ¶æ„å¸ˆ
- **æ–‡æ¡£ç»´æŠ¤**: Claude Code

---

**æœ€åæ›´æ–°**: 2025-12-14
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
