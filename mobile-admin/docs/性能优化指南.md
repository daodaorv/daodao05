# ç§»åŠ¨ç®¡ç†ç«¯æ€§èƒ½ä¼˜åŒ–æŒ‡å—

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0 | **åˆ›å»ºæ—¶é—´**: 2025-12-06

---

## ğŸ“‹ ç›®å½•

1. [å›¾ç‰‡æ‡’åŠ è½½](#å›¾ç‰‡æ‡’åŠ è½½)
2. [è™šæ‹Ÿæ»šåŠ¨](#è™šæ‹Ÿæ»šåŠ¨)
3. [æ€§èƒ½ç›‘æ§](#æ€§èƒ½ç›‘æ§)
4. [æ·±è‰²ä¸»é¢˜](#æ·±è‰²ä¸»é¢˜)
5. [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)

---

## ğŸ–¼ï¸ å›¾ç‰‡æ‡’åŠ è½½

### ä½¿ç”¨ LazyImage ç»„ä»¶

LazyImage ç»„ä»¶æä¾›äº†è‡ªåŠ¨çš„å›¾ç‰‡æ‡’åŠ è½½åŠŸèƒ½ï¼Œåªæœ‰å½“å›¾ç‰‡è¿›å…¥å¯è§†åŒºåŸŸæ—¶æ‰ä¼šåŠ è½½ã€‚

#### åŸºæœ¬ä½¿ç”¨

```vue
<template>
  <LazyImage
    :src="imageUrl"
    width="100%"
    height="400rpx"
    mode="aspectFill"
    border-radius="12rpx"
    @load="handleImageLoad"
    @error="handleImageError"
  />
</template>

<script>
import LazyImage from '@/components/common/LazyImage.vue'

export default {
  components: {
    LazyImage
  },
  data() {
    return {
      imageUrl: 'https://example.com/image.jpg'
    }
  },
  methods: {
    handleImageLoad(src) {
      console.log('å›¾ç‰‡åŠ è½½æˆåŠŸ:', src)
    },
    handleImageError(src) {
      console.log('å›¾ç‰‡åŠ è½½å¤±è´¥:', src)
    }
  }
}
</script>
```

#### ç»„ä»¶å±æ€§

| å±æ€§ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| src | String | - | å›¾ç‰‡åœ°å€ï¼ˆå¿…å¡«ï¼‰ |
| placeholder | String | '' | å ä½å›¾åœ°å€ |
| errorImage | String | '/static/images/error.png' | é”™è¯¯å›¾åœ°å€ |
| mode | String | 'aspectFill' | å›¾ç‰‡è£å‰ªæ¨¡å¼ |
| width | String | '100%' | å®¹å™¨å®½åº¦ |
| height | String | 'auto' | å®¹å™¨é«˜åº¦ |
| borderRadius | String | '0' | åœ†è§’å¤§å° |
| immediate | Boolean | false | æ˜¯å¦ç«‹å³åŠ è½½ |
| threshold | Number | 100 | æ‡’åŠ è½½é˜ˆå€¼ï¼ˆåƒç´ ï¼‰ |

#### äº‹ä»¶

- `@load` - å›¾ç‰‡åŠ è½½æˆåŠŸæ—¶è§¦å‘
- `@error` - å›¾ç‰‡åŠ è½½å¤±è´¥æ—¶è§¦å‘

#### æ–¹æ³•

```javascript
// æ‰‹åŠ¨é‡æ–°åŠ è½½å›¾ç‰‡
this.$refs.lazyImage.reload()
```

---

## ğŸ“œ è™šæ‹Ÿæ»šåŠ¨

### ä½¿ç”¨ VirtualList ç»„ä»¶

VirtualList ç»„ä»¶ç”¨äºä¼˜åŒ–é•¿åˆ—è¡¨æ€§èƒ½ï¼Œåªæ¸²æŸ“å¯è§†åŒºåŸŸå†…çš„åˆ—è¡¨é¡¹ã€‚

#### åŸºæœ¬ä½¿ç”¨

```vue
<template>
  <VirtualList
    :data="listData"
    :item-height="120"
    height="100vh"
    item-key="id"
    :buffer="5"
    @scroll="handleScroll"
  >
    <template #default="{ item, index }">
      <view class="list-item">
        <text>{{ item.name }}</text>
        <text>ç´¢å¼•: {{ index }}</text>
      </view>
    </template>
  </VirtualList>
</template>

<script>
import VirtualList from '@/components/common/VirtualList.vue'

export default {
  components: {
    VirtualList
  },
  data() {
    return {
      listData: [] // å¤§é‡æ•°æ®
    }
  },
  methods: {
    handleScroll(e) {
      console.log('æ»šåŠ¨ä½ç½®:', e.detail.scrollTop)
    }
  }
}
</script>
```

#### ç»„ä»¶å±æ€§

| å±æ€§ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| data | Array | [] | åˆ—è¡¨æ•°æ®ï¼ˆå¿…å¡«ï¼‰ |
| itemHeight | Number | - | æ¯é¡¹é«˜åº¦ï¼ˆå¿…å¡«ï¼‰ |
| height | String | '100vh' | å®¹å™¨é«˜åº¦ |
| itemKey | String | 'id' | æ•°æ®é¡¹å”¯ä¸€æ ‡è¯†å­—æ®µ |
| buffer | Number | 5 | ç¼“å†²åŒºå¤§å° |

#### æ–¹æ³•

```javascript
// æ»šåŠ¨åˆ°æŒ‡å®šç´¢å¼•
this.$refs.virtualList.scrollToIndex(100)

// æ»šåŠ¨åˆ°é¡¶éƒ¨
this.$refs.virtualList.scrollToTop()

// æ»šåŠ¨åˆ°åº•éƒ¨
this.$refs.virtualList.scrollToBottom()
```

#### æ³¨æ„äº‹é¡¹

1. **å›ºå®šé«˜åº¦**: æ¯ä¸ªåˆ—è¡¨é¡¹å¿…é¡»æœ‰å›ºå®šé«˜åº¦
2. **å”¯ä¸€æ ‡è¯†**: æ¯ä¸ªæ•°æ®é¡¹å¿…é¡»æœ‰å”¯ä¸€çš„ key
3. **å¤§æ•°æ®é‡**: é€‚ç”¨äº 1000+ æ¡æ•°æ®çš„åˆ—è¡¨

---

## ğŸ“Š æ€§èƒ½ç›‘æ§

### ä½¿ç”¨ PerformanceMonitor

æ€§èƒ½ç›‘æ§å·¥å…·æä¾›é¡µé¢åŠ è½½ã€APIè°ƒç”¨ã€å†…å­˜ä½¿ç”¨ã€FPSç­‰æ€§èƒ½æŒ‡æ ‡ç›‘æ§ã€‚

#### å¯åŠ¨ç›‘æ§

```javascript
import performanceMonitor from '@/utils/performance'

// åœ¨ App.vue çš„ onLaunch ä¸­å¯åŠ¨
export default {
  onLaunch() {
    performanceMonitor.startMonitoring()
  },
  onHide() {
    performanceMonitor.stopMonitoring()
  }
}
```

#### è®°å½• API è°ƒç”¨æ€§èƒ½

```javascript
import performanceMonitor from '@/utils/performance'

async function fetchData() {
  const startTime = Date.now()

  try {
    const result = await api.getData()
    const duration = Date.now() - startTime

    // è®°å½• API è°ƒç”¨æ€§èƒ½
    performanceMonitor.recordAPICall('/api/data', duration, true)

    return result
  } catch (error) {
    const duration = Date.now() - startTime
    performanceMonitor.recordAPICall('/api/data', duration, false)
    throw error
  }
}
```

#### è·å–æ€§èƒ½æŒ‡æ ‡

```javascript
import performanceMonitor from '@/utils/performance'

// è·å–æ‰€æœ‰æ€§èƒ½æŒ‡æ ‡
const metrics = performanceMonitor.getMetrics()
console.log('æ€§èƒ½æŒ‡æ ‡:', metrics)

// ç”Ÿæˆæ€§èƒ½æŠ¥å‘Š
const report = performanceMonitor.generateReport()
console.log(report)

// å¯¼å‡ºæ€§èƒ½æ•°æ®
const data = performanceMonitor.exportData()
```

#### æ€§èƒ½è£…é¥°å™¨

```javascript
import { measurePerformance } from '@/utils/performance'

export default {
  methods: {
    // ä½¿ç”¨è£…é¥°å™¨ç›‘æ§æ–¹æ³•æ‰§è¡Œæ—¶é—´
    @measurePerformance('loadUserData')
    async loadUserData() {
      // æ–¹æ³•å®ç°
    }
  }
}
```

#### èŠ‚æµå’Œé˜²æŠ–

```javascript
import { throttle, debounce } from '@/utils/performance'

export default {
  methods: {
    // èŠ‚æµï¼šé™åˆ¶å‡½æ•°æ‰§è¡Œé¢‘ç‡
    handleScroll: throttle(function(e) {
      console.log('æ»šåŠ¨äº‹ä»¶', e)
    }, 300),

    // é˜²æŠ–ï¼šå»¶è¿Ÿæ‰§è¡Œï¼Œå¤šæ¬¡è°ƒç”¨åªæ‰§è¡Œæœ€åä¸€æ¬¡
    handleSearch: debounce(function(keyword) {
      console.log('æœç´¢', keyword)
    }, 500)
  }
}
```

---

## ğŸŒ™ æ·±è‰²ä¸»é¢˜

### å¯ç”¨æ·±è‰²ä¸»é¢˜

æ·±è‰²ä¸»é¢˜æ ·å¼å·²ç»åˆ›å»ºå®Œæˆï¼Œä½¿ç”¨ä¸»é¢˜ç®¡ç†å·¥å…·å³å¯åˆ‡æ¢ã€‚

#### åˆ‡æ¢ä¸»é¢˜

```javascript
import themeManager from '@/utils/theme'

// è®¾ç½®æ·±è‰²ä¸»é¢˜
themeManager.setTheme('dark')

// è®¾ç½®æµ…è‰²ä¸»é¢˜
themeManager.setTheme('light')

// è·Ÿéšç³»ç»Ÿ
themeManager.setTheme('auto')

// åˆ‡æ¢ä¸»é¢˜ï¼ˆåœ¨ light å’Œ dark ä¹‹é—´åˆ‡æ¢ï¼‰
themeManager.toggleTheme()
```

#### ç›‘å¬ä¸»é¢˜å˜åŒ–

```javascript
import themeManager from '@/utils/theme'

export default {
  mounted() {
    // æ·»åŠ ä¸»é¢˜å˜åŒ–ç›‘å¬å™¨
    this.unsubscribe = themeManager.addListener((themeInfo) => {
      console.log('ä¸»é¢˜å·²åˆ‡æ¢:', themeInfo.actualTheme)
      console.log('ä¸»é¢˜é…ç½®:', themeInfo.config)
    })
  },
  beforeDestroy() {
    // ç§»é™¤ç›‘å¬å™¨
    if (this.unsubscribe) {
      this.unsubscribe()
    }
  }
}
```

#### è·å–ä¸»é¢˜ä¿¡æ¯

```javascript
import themeManager from '@/utils/theme'

// è·å–å½“å‰ä¸»é¢˜
const currentTheme = themeManager.getCurrentTheme() // 'light', 'dark', 'auto'

// è·å–å®é™…åº”ç”¨çš„ä¸»é¢˜
const actualTheme = themeManager.getActualTheme() // 'light' or 'dark'

// åˆ¤æ–­æ˜¯å¦ä¸ºæ·±è‰²ä¸»é¢˜
const isDark = themeManager.isDarkTheme()

// è·å–ä¸»é¢˜é…ç½®
const config = themeManager.getThemeConfig()

// è·å–ä¸»é¢˜é¢œè‰²
const primaryColor = themeManager.getThemeColor('primaryColor')
```

#### åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ä¸»é¢˜

```vue
<template>
  <view :class="{ 'dark-theme': isDark }">
    <text>å½“å‰ä¸»é¢˜: {{ currentTheme }}</text>
  </view>
</template>

<script>
import themeManager from '@/utils/theme'

export default {
  data() {
    return {
      currentTheme: 'light',
      isDark: false
    }
  },
  mounted() {
    this.updateTheme()
    this.unsubscribe = themeManager.addListener(() => {
      this.updateTheme()
    })
  },
  methods: {
    updateTheme() {
      this.currentTheme = themeManager.getCurrentTheme()
      this.isDark = themeManager.isDarkTheme()
    }
  },
  beforeDestroy() {
    if (this.unsubscribe) {
      this.unsubscribe()
    }
  }
}
</script>
```

---

## ğŸ¯ æœ€ä½³å®è·µ

### 1. å›¾ç‰‡ä¼˜åŒ–

#### ä½¿ç”¨åˆé€‚çš„å›¾ç‰‡æ ¼å¼
- **JPEG**: é€‚ç”¨äºç…§ç‰‡å’Œå¤æ‚å›¾åƒ
- **PNG**: é€‚ç”¨äºéœ€è¦é€æ˜èƒŒæ™¯çš„å›¾åƒ
- **WebP**: æ›´å°çš„æ–‡ä»¶å¤§å°ï¼Œæ›´å¥½çš„è´¨é‡

#### å›¾ç‰‡å‹ç¼©
```javascript
// åœ¨ä¸Šä¼ å‰å‹ç¼©å›¾ç‰‡
uni.chooseImage({
  count: 1,
  sizeType: ['compressed'], // ä½¿ç”¨å‹ç¼©å›¾
  success: (res) => {
    // å¤„ç†å›¾ç‰‡
  }
})
```

#### ä½¿ç”¨ CDN
```javascript
// ä½¿ç”¨ CDN åŠ é€Ÿå›¾ç‰‡åŠ è½½
const imageUrl = `https://cdn.example.com/images/${filename}`
```

### 2. ä»£ç åˆ†å‰²

#### è·¯ç”±æ‡’åŠ è½½
```javascript
// pages.json ä¸­é…ç½®æŒ‰éœ€åŠ è½½
{
  "pages": [
    {
      "path": "pages/index/index",
      "style": {
        "navigationBarTitleText": "é¦–é¡µ"
      }
    }
  ]
}
```

#### ç»„ä»¶æ‡’åŠ è½½
```vue
<script>
export default {
  components: {
    // å¼‚æ­¥ç»„ä»¶
    HeavyComponent: () => import('@/components/HeavyComponent.vue')
  }
}
</script>
```

### 3. æ•°æ®ç¼“å­˜

#### ä½¿ç”¨æœ¬åœ°å­˜å‚¨
```javascript
import { getStorage, setStorage } from '@/utils/storage'

// ç¼“å­˜æ•°æ®
async function fetchData() {
  // å…ˆä»ç¼“å­˜è¯»å–
  const cached = getStorage('data_cache')
  if (cached) {
    return cached
  }

  // ä»æœåŠ¡å™¨è·å–
  const data = await api.getData()

  // å­˜å…¥ç¼“å­˜
  setStorage('data_cache', data)

  return data
}
```

#### è®¾ç½®ç¼“å­˜è¿‡æœŸæ—¶é—´
```javascript
function setCacheWithExpiry(key, value, expiryMinutes) {
  const item = {
    value: value,
    expiry: Date.now() + expiryMinutes * 60 * 1000
  }
  setStorage(key, item)
}

function getCacheWithExpiry(key) {
  const item = getStorage(key)
  if (!item) return null

  if (Date.now() > item.expiry) {
    removeStorage(key)
    return null
  }

  return item.value
}
```

### 4. è¯·æ±‚ä¼˜åŒ–

#### è¯·æ±‚åˆå¹¶
```javascript
// åˆå¹¶å¤šä¸ªè¯·æ±‚
async function loadPageData() {
  const [users, orders, vehicles] = await Promise.all([
    api.getUsers(),
    api.getOrders(),
    api.getVehicles()
  ])

  return { users, orders, vehicles }
}
```

#### è¯·æ±‚å–æ¶ˆ
```javascript
let requestTask = null

function fetchData() {
  // å–æ¶ˆä¹‹å‰çš„è¯·æ±‚
  if (requestTask) {
    requestTask.abort()
  }

  requestTask = uni.request({
    url: '/api/data',
    success: (res) => {
      // å¤„ç†æ•°æ®
    }
  })
}
```

### 5. åˆ—è¡¨ä¼˜åŒ–

#### ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨
```vue
<!-- å¯¹äºè¶…è¿‡ 100 æ¡çš„åˆ—è¡¨ï¼Œä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨ -->
<VirtualList :data="longList" :item-height="80">
  <template #default="{ item }">
    <ListItem :data="item" />
  </template>
</VirtualList>
```

#### åˆ†é¡µåŠ è½½
```javascript
export default {
  data() {
    return {
      list: [],
      page: 1,
      pageSize: 20,
      hasMore: true
    }
  },
  methods: {
    async loadMore() {
      if (!this.hasMore) return

      const res = await api.getList({
        page: this.page,
        pageSize: this.pageSize
      })

      this.list.push(...res.list)
      this.page++
      this.hasMore = res.list.length === this.pageSize
    }
  }
}
```

### 6. äº‹ä»¶ä¼˜åŒ–

#### ä½¿ç”¨èŠ‚æµ
```javascript
import { throttle } from '@/utils/performance'

export default {
  methods: {
    // æ»šåŠ¨äº‹ä»¶èŠ‚æµ
    handleScroll: throttle(function(e) {
      // å¤„ç†æ»šåŠ¨
    }, 200)
  }
}
```

#### ä½¿ç”¨é˜²æŠ–
```javascript
import { debounce } from '@/utils/performance'

export default {
  methods: {
    // æœç´¢è¾“å…¥é˜²æŠ–
    handleInput: debounce(function(value) {
      this.search(value)
    }, 500)
  }
}
```

### 7. å†…å­˜ç®¡ç†

#### åŠæ—¶æ¸…ç†å®šæ—¶å™¨
```javascript
export default {
  data() {
    return {
      timer: null
    }
  },
  mounted() {
    this.timer = setInterval(() => {
      // å®šæ—¶ä»»åŠ¡
    }, 1000)
  },
  beforeDestroy() {
    // æ¸…ç†å®šæ—¶å™¨
    if (this.timer) {
      clearInterval(this.timer)
      this.timer = null
    }
  }
}
```

#### ç§»é™¤äº‹ä»¶ç›‘å¬
```javascript
export default {
  mounted() {
    this.handleResize = () => {
      // å¤„ç†çª—å£å¤§å°å˜åŒ–
    }
    window.addEventListener('resize', this.handleResize)
  },
  beforeDestroy() {
    // ç§»é™¤äº‹ä»¶ç›‘å¬
    window.removeEventListener('resize', this.handleResize)
  }
}
```

---

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

### ç›®æ ‡æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | è¯´æ˜ |
|------|--------|------|
| é¦–å±åŠ è½½æ—¶é—´ | < 3ç§’ | ä»æ‰“å¼€åº”ç”¨åˆ°é¦–å±å†…å®¹æ˜¾ç¤º |
| API å“åº”æ—¶é—´ | < 2ç§’ | å•ä¸ª API è¯·æ±‚çš„å“åº”æ—¶é—´ |
| é¡µé¢åˆ‡æ¢æ—¶é—´ | < 500ms | é¡µé¢è·³è½¬çš„å“åº”æ—¶é—´ |
| åˆ—è¡¨æ»šåŠ¨ FPS | > 30 | åˆ—è¡¨æ»šåŠ¨æ—¶çš„å¸§ç‡ |
| å†…å­˜ä½¿ç”¨ | < 200MB | åº”ç”¨è¿è¡Œæ—¶çš„å†…å­˜å ç”¨ |

### ç›‘æ§æ–¹æ³•

```javascript
import performanceMonitor from '@/utils/performance'

// å¯åŠ¨ç›‘æ§
performanceMonitor.startMonitoring()

// å®šæœŸæ£€æŸ¥æ€§èƒ½æŒ‡æ ‡
setInterval(() => {
  const metrics = performanceMonitor.getMetrics()

  // æ£€æŸ¥æ˜¯å¦è¾¾æ ‡
  if (metrics.pageLoad.loadTime > 3000) {
    console.warn('é¦–å±åŠ è½½æ—¶é—´è¿‡é•¿')
  }

  if (metrics.fps.avg < 30) {
    console.warn('å¸§ç‡è¿‡ä½')
  }
}, 60000) // æ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡
```

---

## ğŸ”§ æ•…éšœæ’æŸ¥

### å¸¸è§æ€§èƒ½é—®é¢˜

#### 1. é¦–å±åŠ è½½æ…¢
**åŸå› **:
- å›¾ç‰‡è¿‡å¤§
- è¯·æ±‚è¿‡å¤š
- ä»£ç åŒ…è¿‡å¤§

**è§£å†³æ–¹æ¡ˆ**:
- ä½¿ç”¨å›¾ç‰‡æ‡’åŠ è½½
- åˆå¹¶è¯·æ±‚
- ä»£ç åˆ†å‰²

#### 2. åˆ—è¡¨æ»šåŠ¨å¡é¡¿
**åŸå› **:
- åˆ—è¡¨é¡¹è¿‡å¤š
- åˆ—è¡¨é¡¹æ¸²æŸ“å¤æ‚
- é¢‘ç¹çš„ DOM æ“ä½œ

**è§£å†³æ–¹æ¡ˆ**:
- ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨
- ç®€åŒ–åˆ—è¡¨é¡¹ç»“æ„
- ä½¿ç”¨èŠ‚æµä¼˜åŒ–æ»šåŠ¨äº‹ä»¶

#### 3. å†…å­˜æ³„æ¼
**åŸå› **:
- å®šæ—¶å™¨æœªæ¸…ç†
- äº‹ä»¶ç›‘å¬æœªç§»é™¤
- é—­åŒ…å¼•ç”¨

**è§£å†³æ–¹æ¡ˆ**:
- åœ¨ beforeDestroy ä¸­æ¸…ç†èµ„æº
- ä½¿ç”¨å¼±å¼•ç”¨
- é¿å…å¾ªç¯å¼•ç”¨

#### 4. API è¯·æ±‚æ…¢
**åŸå› **:
- ç½‘ç»œé—®é¢˜
- æœåŠ¡å™¨å“åº”æ…¢
- è¯·æ±‚æ•°æ®é‡å¤§

**è§£å†³æ–¹æ¡ˆ**:
- ä½¿ç”¨æ•°æ®ç¼“å­˜
- åˆ†é¡µåŠ è½½
- è¯·æ±‚åˆå¹¶

---

## ğŸ“š å‚è€ƒèµ„æº

- [uni-app æ€§èƒ½ä¼˜åŒ–æŒ‡å—](https://uniapp.dcloud.net.cn/tutorial/performance.html)
- [Vue æ€§èƒ½ä¼˜åŒ–](https://vuejs.org/guide/best-practices/performance.html)
- [Web æ€§èƒ½ä¼˜åŒ–](https://web.dev/performance/)

---

**æ–‡æ¡£ç»´æŠ¤**: å¨å¨æˆ¿è½¦æŠ€æœ¯å›¢é˜Ÿ
**æœ€åæ›´æ–°**: 2025-12-06
**ç‰ˆæœ¬**: v1.0.0
